CREATE DATABASE `web_account_db` CHARACTER SET utf8 COLLATE utf8_general_ci;

USE web_account_db;
DROP TABLE IF EXISTS amounts;
CREATE TABLE amounts (
ID INT NOT NULL AUTO_INCREMENT
, category_id INT
, user_id INT
, good_id INT
, name VARCHAR(40)
, price DECIMAL(10, 2) DEFAULT 0
, date DATE
, details VARCHAR(256)
, PRIMARY KEY (id)
);

USE web_account_db;
DROP TABLE IF EXISTS categories;
CREATE TABLE categories (
ID INT NOT NULL AUTO_INCREMENT
, parent_id INT
, user_id INT
, name VARCHAR(40)
, details VARCHAR(256)
, type TINYINT(1) DEFAULT 0
, PRIMARY KEY (id)
);
DROP TABLE IF EXISTS users;
CREATE TABLE `users` (
  ID INT NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(100) NOT NULL,
  `full_name` varchar(100) NOT NULL,
  `role` varchar(50) NOT NULL,
  `enabled` tinyint(1) NOT NULL,
  PRIMARY KEY (id)
);
DROP TABLE IF EXISTS products;
CREATE TABLE products (
ID INT NOT NULL AUTO_INCREMENT
, name VARCHAR(40)
, user_id INT
, PRIMARY KEY (id)
);

USE web_account_db;
DROP TABLE IF EXISTS notifications;
DROP TABLE IF EXISTS limits;
CREATE TABLE limits (
    ID INT NOT NULL AUTO_INCREMENT
  , type VARCHAR(40)
  , entity_id INT
  , entity_name VARCHAR(40)
  , sum DECIMAL(10, 2) DEFAULT 0
  , period tinyint(1)
  , user_id INT
  , PRIMARY KEY (id)
);

DROP TABLE IF EXISTS mail;
CREATE TABLE mail (
    ID INT NOT NULL AUTO_INCREMENT
  , date DATE
  , sender VARCHAR(40)
  , title VARCHAR(255)
  , text TEXT
  , is_read TINYINT(1) DEFAULT 0
  , user_id INT
  , PRIMARY KEY (id)
);

ALTER TABLE amounts ADD product_id INT;
ALTER TABLE limits ADD product_id INT;
ALTER TABLE limits ADD category_id INT;

DROP TABLE IF EXISTS persistent_logins;
CREATE TABLE persistent_logins (
    username VARCHAR(64) NOT NULL,
    series VARCHAR(64) NOT NULL,
    token VARCHAR(64) NOT NULL,
    last_used TIMESTAMP NOT NULL,
    PRIMARY KEY (series)
);

INSERT INTO categories (parent_id, user_id, name, details, type) VALUES (0, 1, 'Категория 1', 'Описание 1', 0);
INSERT INTO categories (parent_id, user_id, name, details, type) VALUES (1, 1, 'Категория 2', 'Описание 2', 1);

INSERT INTO amounts (category_id, user_id, name, price, date, details)
    VALUES (1, 1, 'товар 1', 100, CURDATE(), "details1");
INSERT INTO amounts (category_id, user_id, name, price, date, details)
    VALUES (2, 1, 'товар 2', 500, CURDATE(), "details2");
INSERT INTO amounts (category_id, user_id, name, price, date, details)
    VALUES (1, 1, 'товар 3', 100, CURDATE(), "details3");

http://javastudy.ru/spring-data-jpa/spring-data-jpa-helloworld/
http://javastudy.ru/interview/jee-spring-questions-answers/
Spring Security 4 + view
https://github.com/hellokoding/registration-login-spring-xml-maven-jsp-mysql
https://hellokoding.com/registration-and-login-example-with-spring-xml-configuration-maven-jsp-and-mysql/
